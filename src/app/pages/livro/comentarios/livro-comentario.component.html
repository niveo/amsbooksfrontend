@if(autenticacaoStore.isUsuarioLogado){
<nz-comment [nzAuthor]="tplautor">
  <nz-comment-content>
    <nz-form-item>
      <textarea [(ngModel)]="inputValue" nz-input rows="4"></textarea>
    </nz-form-item>
    <nz-form-item>
      <button
        nz-button
        nzType="primary"
        [nzLoading]="loading"
        [disabled]="!inputValue || !rate"
        (click)="handleSubmit()"
      >
        Incluir
      </button>
    </nz-form-item>
  </nz-comment-content>
</nz-comment>
} @else {<nz-alert
  nzType="info"
  nzMessage="É necessário estar logado para fazer um comentario."
></nz-alert
>}

<nz-spin [nzSpinning]="loading">
  <nz-list [nzItemLayout]="'horizontal'">
    @for(item of data$ | async; track item.codigo){
    <nz-comment
      [nzAuthor]="item.nome"
      [nzDatetime]="item.displayTime | datedistance"
    >
      <nz-avatar
        nz-comment-avatar
        nzIcon="user"
        [nzSrc]="item.avatar"
      ></nz-avatar>
      <nz-comment-content>
        <nz-rate [(ngModel)]="item.rate" [nzDisabled]="true"></nz-rate>
        <p>{{ item.texto }}</p>
      </nz-comment-content>
    </nz-comment>
    }
  </nz-list>
</nz-spin>

<ng-template #tplautor>
  <app-avatar-usuario-component />
  <nz-rate [(ngModel)]="rate"></nz-rate>
</ng-template>
